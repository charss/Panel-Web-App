{% extends "admin.html" %}
{% block title %}Home Page{% endblock %}
{% block pagename %}
    Defense Schedules
{% endblock %}
{% block button %}
	<head>
        <link rel='stylesheet' href="{{ url_for('static', filename ='admin/indiv_sheet.css') }}">
	</head>
<a href="/new_sched/">
    <button>Create New Defense Schedule</button>
</a>
{% endblock %}
{% block content %}
    <script>
        $(document).ready(function(){
            $('select').on('change', function(event ) {
                var prevValue = $(this).data('previous');
            $('select').not(this).find('option[value="'+prevValue+'"]').show();    
                var value = $(this).val();
            $(this).data('previous',value); $('select').not(this).find('option[value="'+value+'"]').hide();
            });
        });
    </script>
    <div class='display_grid'>
        {% if defenses %}
            {% for defense in defenses %}
                <div class='div1'>
					<table>
						<th class = "tb_desc">ID:</th>
						<td colspan = "3"> {{ defense.id }} </td>
						<tr>
						<th class = "tb_desc">Group Name:</th>
						<td colspan = "3"> {{ defense.group.name }} </td>
						<tr>
						<th colspan = "4">Panels:</th>
						<tr>
							{% for panel in defense.panels %}
								{% if panel.id == defense.head_panel_id: %}
									<td colspan = "4">{{ panel.last_name }}, {{ panel.first_name }} {{ panel.middle_in }}. - HP</td><tr>
								{% else: %}
									<td  colspan = "4">{{ panel.last_name }}, {{ panel.first_name }} {{ panel.middle_in }}.</td><tr>
								{% endif %}
							{% endfor %}
						<th class = "tb_desc">Defense Date:</th>
						<td colspan = "4"> {{ defense.start_date}} </td>
						<tr>
						<a href="/assign_indiv/">
							<th><button class = "but2" >Assign Individual Gradesheet</button></th>
						</a>
						<br>
						<br>
						<a href="">
							<th><button class = "but2" >Assign Group Gradesheet</button></th>
						</a>
						<br>
						<br>
						<a href="/edit_sched/{{ defense.id }}">
							<th><button class = "but2" >Edit</button></th>
						</a>
						
						<a href="/delete_sched/{{ defense.id }}">
							<th><button class = "but2" >Delete</button></th>
						</a>
					</table>
                </div>
                
            {% endfor %}
        {% endif %}
    </div>
{% endblock %}